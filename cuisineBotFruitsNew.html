<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CuisineBot</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      background-color: #F2DDA7;
    }
    .box {
      width: 300px;
      height: 100px;
      padding-top: 30px;
      padding-left: 20px;
      margin: 10px auto;
      background-color: #f9f9f9;
      border-radius: 15px;
      font-size: 1.2rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
      text-align: left; 
    }
    .interactive:hover {
      border: 5px solid #FCBA0F;
    }
    .box-link {
      text-decoration: none;
      display: block;
    }
    a {
      color: black;
      text-decoration: none;
    }
    .interactive.selected {
      border: 5px solid #fc910f;
    }
    #connectBtn {
      display: block;
      margin: 10px auto;
      padding: 10px 20px;
      font-size: 1rem;
    }
  </style>
</head>

<body>
  <h1 style="color:black; font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; font-size: 1.5rem;">CuisineBot</h1>
  <p style="text-align: center; font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; font-size: 2rem;">Fruits</p>

  <button id="connectBtn">Connect Arduino</button>

  <a href="CusineBot.html" class="box-link">
    <div class="box interactive" data-selectable="false">Back
      <img src="https://i.postimg.cc/cHkrMFpR/93634.png" alt="Back" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
    </div>
  </a>

  <!-- Fruits -->
  <div class="box interactive" data-name="Apple">Apple
    <img src="https://i.postimg.cc/8P40jdV6/Fresh-Red-Delicious-Apple-Each-7320e63a-de46-4a16-9b8c-526e15219a12-3-e557c1ad9973e1f76f512b34950243.avif" alt="Apple" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Apricot">Apricot
    <img src="https://i.postimg.cc/ZYFfMP0m/images.jpg" alt="Apricot" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Banana">Banana
    <img src="https://i.postimg.cc/CKq7Hk9b/Banana-Single.jpg" alt="Banana" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Blackberry">Blackberry
    <img src="https://i.postimg.cc/4yBQN5h9/80886A.webp" alt="Blackberry" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Blueberry">Blueberry
    <img src="https://i.postimg.cc/MTw7747p/1-bddce89c-0097-45d3-a062-ac4a1a57be4e.webp" alt="Blueberry" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Cantaloupe">Cantaloupe
    <img src="https://i.postimg.cc/kXGxvWbT/Cantaloupe-each-fb4c18a5-9367-4770-b99f-7518c72db482-5609c32e87a3110b734aad048bf9fe35.avif" alt="Cantaloupe" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Cherry">Cherry
    <img src="https://i.postimg.cc/KzQMnYcH/istockphoto-506627545-612x612.jpg" alt="Cherry" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Cranberry">Cranberry
    <img src="https://i.postimg.cc/c1bKZ2vS/cranberry-steven-foster-square.jpg" alt="Cranberry" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Dates">Dates
    <img src="https://i.postimg.cc/XJvJ6k3x/Basically-Medjool-Dates.webp" alt="Dates" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Dragonfruit">Dragon Fruit
    <img src="https://i.postimg.cc/76XKfDFr/3-count-image-of-dragon-fruit-red-fruit-1125636341-512x512-1.webp" alt="Dragon Fruit" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <!-- Add remaining fruits as in your original file -->

  <a href="CusineBot.html" class="box-link">
    <div class="box interactive" data-selectable="false">Back
      <img src="https://i.postimg.cc/cHkrMFpR/93634.png" alt="Back" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
    </div>
  </a>

  <script>
    const boxes = Array.from(document.querySelectorAll('.interactive'));
    let selectedIndex = 0;

    function findNextSelectable(startIndex, direction = 1) {
      let idx = startIndex;
      do {
        idx = (idx + direction + boxes.length) % boxes.length;
      } while (boxes[idx].dataset.selectable === "false");
      return idx;
    }

    selectedIndex = findNextSelectable(-1, 1);
    boxes[selectedIndex].classList.add('selected');

    async function connectSerial() {
      try {
        const port = await navigator.serial.requestPort();
        await port.open({ baudRate: 115200 });

        const decoder = new TextDecoderStream();
        port.readable.pipeTo(decoder.writable);
        const input = decoder.readable.getReader();

        while (true) {
          const { value, done } = await input.read();
          if (done) break;
          if (value) handleCommand(value.trim());
        }
      } catch (err) {
        console.error("Serial error:", err);
      }
    }

    function handleCommand(cmd) {
      if (cmd === "UP") {
        boxes[selectedIndex].classList.remove("selected");
        selectedIndex = findNextSelectable(selectedIndex, -1);
        boxes[selectedIndex].classList.add("selected");
      } 
      else if (cmd === "DOWN") {
        boxes[selectedIndex].classList.remove("selected");
        selectedIndex = findNextSelectable(selectedIndex, 1);
        boxes[selectedIndex].classList.add("selected");
      } 
      else if (cmd === "ENTER") {
        const selectedBox = boxes[selectedIndex];
        const isBackButton = selectedBox.dataset.selectable === "false";
        const link = selectedBox.closest("a");
        if (isBackButton && link && link.href) {
          window.location.href = link.href;
        }
        // Highlight stays on selectable boxes
      }
    }

    document.getElementById("connectBtn").addEventListener("click", connectSerial);
  </script>
</body>
</html>