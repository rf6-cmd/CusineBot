<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CuisineBot</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="script.js"></script>
  <style>
    body {
      background-color: #F2DDA7;
    }
    .box {
      width: 300px;
      height: 100px;
      padding-top: 30px;
      padding-left: 20px;
      margin: 10px auto;
      background-color: #f9f9f9;
      border-radius: 15px;
      font-size: 1.2rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
      text-align: left; 
      transition: border 0.2s, background-color 0.2s;
    }

    .interactive:hover {
      border: 5px solid #FCBA0F;
    }

    .interactive.selected {
      border: 5px solid #fc910f;
      background-color: #ffe9a3;
    }

    .box-link {
      text-decoration: none;
      display: block;
    }

    a {
      color: black;
      text-decoration: none;
    }

    #connectBtn {
      margin-top: 30px;
      padding: 10px 20px;
      background-color: #FCBA0F;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      cursor: pointer;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
</head>

<body>
  <h1 style="color:black; font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; font-size: 1.5rem;">CuisineBot</h1>
  <p style="text-align: center; font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; font-size: 2rem;">Grains</p>

  <!-- BACK BUTTON -->
  <a href="CusineBot.html" class="box-link">
    <div class="box interactive" data-selectable="false">Back
      <img src="https://i.postimg.cc/cHkrMFpR/93634.png" alt="Back" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
    </div>
  </a>

  <!-- ALL GRAIN BOXES -->
  <div class="box interactive" data-name="Amaranth">Amaranth
    <img src="https://i.postimg.cc/zvm1rWW6/image-asset.webp" alt="Amaranth" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Barley">Barley
    <img src="https://i.postimg.cc/RC3cptXy/barley-2-650x650.jpg" alt="Barley" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Bran">Bran
    <img src="https://i.postimg.cc/sg8zctXt/004045-scaled.jpg" alt="Bran" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Breadcrumbs">Breadcrumbs
    <img src="https://i.postimg.cc/jjSLBVQz/bread-crumbs-1500R-14-square.jpg" alt="Breadcrumbs" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Brownrice">Brownrice
    <img src="https://i.postimg.cc/pdrLqfRw/S01c272c7cbc541f8a80ef55e4d9b9be3O-jpg-720x720q80-jpg.webp" alt="Brownrice" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Buckwheat">Buckwheat
    <img src="https://i.postimg.cc/Kz7wTWCb/what-is-buckwheat-the-answer-may-surprise-you-9736828.webp" alt="Buckwheat" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Bulgur">Bulgur
    <img src="https://i.postimg.cc/L8qWD5G0/image-2025-10-22-211027871.png" alt="Bulgur" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Cornflour">Cornflour
    <img src="https://i.postimg.cc/Yq0D2j27/D3819F8A-F8D7-42C8-BE0E-A1CB77FA451A.webp" alt="Cornflour" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Cornmeal">Cornmeal
    <img src="https://i.postimg.cc/9QTpz765/Polenta-uncooked.jpg" alt="Cornmeal" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Farro">Farro
    <img src="https://i.postimg.cc/fRj96f4n/2018-01-25-16-22-07.jpg" alt="Farro" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Freekah">Freekeh
    <img src="https://i.postimg.cc/Z5F7YQvZ/freekeh.jpg" alt="Freekeh" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Grits">Grits
    <img src="https://i.postimg.cc/CxQxZzTW/creamy-and-buttery-grits-feature.jpg" alt="Grits" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Kamut">Kamut
    <img src="https://i.postimg.cc/3NsZJKrX/1384814184055.webp" alt="Kamut" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Millet">Millet
    <img src="https://i.postimg.cc/q7HMcWqD/puffed-millet-9.jpg" alt="Millet" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Muesli">Muesli
    <img src="https://i.postimg.cc/jjSLBVQz/bread-crumbs-1500R-14-square.jpg" alt="Muesli" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Noodles">Noodles
    <img src="https://i.postimg.cc/rwXL7xTr/Teriyaki-Noodles-Devour-Dinner-101-500x375.jpg" alt="Noodles" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Oats">Oats
    <img src="https://i.postimg.cc/SNrcX7K2/oats.jpg" alt="Oats" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Pasta">Pasta
    <img src="https://i.postimg.cc/pVBmkVM7/instant-pot-penne-pasta-recipe.jpg" alt="Pasta" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Polenta">Polenta
    <img src="https://i.postimg.cc/pr57PfnP/Polenta-Spoon.jpg" alt="Polenta" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Quinoa">Quinoa
    <img src="https://i.postimg.cc/fbTMDPW3/Cooking-Quinoa.jpg" alt="Quinoa" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Riceflour">Riceflour
    <img src="https://i.postimg.cc/FzttdCv6/rice-flour-blog-800.jpg" alt="Riceflour" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Rye">Rye
    <img src="https://i.postimg.cc/d3Rf7q4k/ryeberries-1460x.webp" alt="Rye" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Sorghum">Sorghum
    <img src="https://i.postimg.cc/V6w7txTg/sorghum-cooking-recipe.jpg" alt="Sorghum" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Spelt">Spelt
    <img src="https://i.postimg.cc/pdHQcDZ2/3fedf94d3e46c40cee67648315a7fea2c6d83c57.webp" alt="Spelt" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Teff">Teff
    <img src="https://i.postimg.cc/GmJT26FT/Getty-Images-1280544376-e1613760831165.jpg" alt="Teff" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Tortillas">Tortillas
    <img src="https://i.postimg.cc/3NvdHq8c/11EATrex-flour-tortillas-mvfk-google-Four-By-Three.jpg" alt="Tortillas" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Wheatberries">Wheatberries
    <img src="https://i.postimg.cc/rwLf0dHW/wheat-berries.jpg" alt="Wheatberries" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Wheatflakes">Wheatflakes
    <img src="https://i.postimg.cc/44D5q7Xk/16508.jpg" alt="Wheatflakes" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>
  <div class="box interactive" data-name="Whiterice">Whiterice
    <img src="https://i.postimg.cc/8CzBMLmS/Steamed-White-Rice-720x540.png" alt="Whiterice" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
  </div>

  <!-- SECOND BACK BUTTON -->
  <a href="CusineBot.html" class="box-link">
    <div class="box interactive" data-selectable="false">Back
      <img src="https://i.postimg.cc/cHkrMFpR/93634.png" alt="Back" width="100" height="100" style="float: right; margin-right: 10px; margin-top: -10px;"/>
    </div>
  </a>

  <!-- CONNECT BUTTON -->
  <button id="connectBtn">ðŸ”Œ Connect Arduino</button>

  <!-- ARDUINO SERIAL CONTROL SCRIPT -->
  <script>
    const boxes = document.querySelectorAll('.interactive');
    let selectedIndex = 0;

    // Highlight first selectable box
    boxes[selectedIndex].classList.add('selected');

    async function connectSerial() {
      try {
        const port = await navigator.serial.requestPort();
        await port.open({ baudRate: 115200 });

        const decoder = new TextDecoderStream();
        port.readable.pipeTo(decoder.writable);
        const input = decoder.readable.getReader();

        while (true) {
          const { value, done } = await input.read();
          if (done) break;
          if (value) handleCommand(value.trim());
        }
      } catch (err) {
        console.error("Serial error:", err);
      }
    }

    function handleCommand(cmd) {
      if (cmd === "UP") {
        boxes[selectedIndex].classList.remove("selected");
        selectedIndex = (selectedIndex - 1 + boxes.length) % boxes.length;
        boxes[selectedIndex].classList.add("selected");
      } else if (cmd === "DOWN") {
        boxes[selectedIndex].classList.remove("selected");
        selectedIndex = (selectedIndex + 1) % boxes.length;
        boxes[selectedIndex].classList.add("selected");
      } else if (cmd === "ENTER") {
        const selectedBox = boxes[selectedIndex];
        const isBackButton = selectedBox.dataset.selectable === "false";
        const link = selectedBox.closest("a");

        if (isBackButton && link && link.href) {
          window.location.href = link.href;
        }
        // For ingredients: do nothing, selection box stays
      }
    }

    document.getElementById("connectBtn").addEventListener("click", connectSerial);
  </script>
</body>
</html>